"use strict";(self.webpackChunkspa=self.webpackChunkspa||[]).push([[194],{913(e,r,a){a.d(r,{J:()=>o});var n=a(2359),t=a(9641);class o{agregar(e){return(0,t.bE)(n.u.MAESTRO_AGREGAR,e,!0)}editar(e){return(0,t.yJ)(n.u.MAESTRO_EDITAR,e,!0)}editarStatus(e){return(0,t.yJ)(n.u.MAESTRO_EDITAR_STATUS,e,!0)}eliminar(e){return(0,t.yH)(n.u.MAESTRO_ELIMINAR+"/".concat(e))}obtener(e){return(0,t.Jt)(n.u.MAESTRO_OBTENER+"/".concat(e),!0)}buscar(e,r,a,o){const s=new URLSearchParams;return s.append("palabra",e),s.append("ordenBy",r),s.append("orden",a),s.append("pagina",o.toString()),(0,t.rr)(n.u.MAESTRO_BUSCAR,s,!0)}}},5719(e,r,a){a.d(r,{L:()=>n,j:()=>t});class n{constructor(e,r,a,n,t,o,s){this.maestro_id=void 0,this.nombre=void 0,this.apellido_paterno=void 0,this.apellido_materno=void 0,this.escolaridad=void 0,this.coordinador=void 0,this.carrera=void 0,this.maestro_id=e,this.nombre=r,this.apellido_paterno=a,this.apellido_materno=n,this.escolaridad=t,this.coordinador=o,this.carrera=s}}class t{constructor(e,r){this.maestro_id=void 0,this.status=void 0,this.maestro_id=e,this.status=r}}},6194(e,r,a){a.r(r),a.d(r,{default:()=>ae});var n=a(5043),t=a(7874),o=a(3969),s=a(298),i=a(2097),l=a(7240),c=a(4842),d=a(5749),h=a(288),u=a(4799),p=a(3209),A=a(2579),x=a(3745),j=a(579);function m(e){let{handleBuscar:r,placeholder:a,handleSetPalabra:n}=e;return(0,j.jsxs)(u.A,{className:"input-search",sx:{p:"2px 4px",display:"flex",alignItems:"center"},children:[(0,j.jsx)(p.Ay,{sx:{ml:1,flex:1},placeholder:a,inputProps:{"aria-label":"search"},onChange:e=>n(e.target.value),onKeyDown:function(e){"Enter"===e.key&&r()}}),(0,j.jsx)(A.A,{type:"button",sx:{p:"10px"},"aria-label":"search",onClick:function(){r()},children:(0,j.jsx)(x.A,{})})]})}var g=a(2359),y=a(913),f=a(5391),v=a(3849);function b(){return(0,j.jsxs)(s.A,{spacing:1,children:[(0,j.jsx)(v.A,{variant:"rounded",height:50}),(0,j.jsx)(v.A,{variant:"rounded",height:150}),(0,j.jsx)(v.A,{variant:"rounded",height:150})]})}var S=a(3768),w=a(7873),R=a(2661),E=a(7443),_=a(4375),C=a(1341),T=a(756),I=a(6172),k=a(3759);function B(e){let{status:r}=e;var a;switch(r){case 1:a=(0,j.jsx)(k.A,{label:"Activo",color:"info",variant:"outlined"});break;case 2:a=(0,j.jsx)(k.A,{label:"Inactivo",color:"warning",variant:"outlined"});break;case 4:a=(0,j.jsx)(k.A,{label:"Eliminado",color:"error",variant:"outlined"})}return(0,j.jsx)(j.Fragment,{children:a})}var U=a(8427),z=a(311),F=a(5606),M=a(5261),O=a(8740),D=a(7237),H=a(9801),L=a(2701),N=a(468),G=a(3300),J=a(966),P=a(5719),Z=a(3023),K=a(5877),Q=a(8776),q=a(9200),V=a(1911);function W(e){let{showDialog:r,titulo:a,descripcion:n,handleConfirmacion:t}=e;const o=()=>{t(!1)};return(0,j.jsxs)(Z.A,{open:r,onClose:o,closeAfterTransition:!1,children:[(0,j.jsx)(V.A,{children:a}),(0,j.jsx)(Q.A,{children:(0,j.jsx)(q.A,{children:n})}),(0,j.jsxs)(K.A,{children:[(0,j.jsx)(i.A,{onClick:o,variant:"contained",color:"error",children:"Cancelar"}),(0,j.jsx)(i.A,{onClick:()=>{t(!0)},variant:"outlined",color:"success",children:"Aceptar"})]})]})}var X=a(8074);function Y(e){let{maestro:r,setLoadingModal:a,onComplete:o}=e;const s=new y.J,[i,l]=(0,n.useState)(!1),c=(0,t.Zp)(),d="El maestro "+r.apellido_paterno+" "+r.nombre+" parecer\xe1 en estado eliminado. Favor de confirmar la acci\xf3n.";async function h(){a(!0);try{var e=new P.j(r.maestro_id,1==r.status?2:1),n=await s.editarStatus(e);n.success?S.Ay.success("Maestro editado con \xe9xito!"):n.error?S.Ay.error(n.error):S.Ay.error(f.HG.ERROR_DEFAULT)}catch(t){S.Ay.error(t)}finally{a(!1),p(null),o()}}const[u,p]=(0,n.useState)(null),x=Boolean(u);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(A.A,{"aria-controls":x?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":x?"true":void 0,onClick:e=>{p(e.currentTarget)},children:(0,j.jsx)(M.A,{})}),(0,j.jsxs)(O.A,{anchorEl:u,open:x,onClose:()=>{p(null)},children:[(0,j.jsxs)(D.A,{onClick:()=>(c(g.u.SPA_MAESTRO_EDITAR+"/"+r.maestro_id,{replace:!0}),void p(null)),children:[(0,j.jsx)(H.A,{children:(0,j.jsx)(N.A,{fontSize:"small"})}),"Editar"]}),1==r.status?(0,j.jsxs)(D.A,{onClick:()=>h(),children:[(0,j.jsx)(H.A,{children:(0,j.jsx)(X.A,{fontSize:"small"})}),"Desactivar"]}):(0,j.jsxs)(D.A,{onClick:()=>h(),children:[(0,j.jsx)(H.A,{children:(0,j.jsx)(J.A,{fontSize:"small"})}),"Activar"]}),(0,j.jsxs)(D.A,{onClick:()=>(console.log(r),void a(!0)),children:[(0,j.jsx)(H.A,{children:(0,j.jsx)(L.A,{fontSize:"small"})}),"QR Code"]}),(0,j.jsxs)(D.A,{onClick:()=>{l(!0)},children:[(0,j.jsx)(H.A,{children:(0,j.jsx)(G.A,{fontSize:"small"})}),"Eliminar"]})]}),(0,j.jsx)(W,{showDialog:i,titulo:"\xbfSeguro de eliminar el registro del maestro?",descripcion:d,handleConfirmacion:async function(e){if(l(!1),1==e){a(!0);try{var n=await s.eliminar(r.maestro_id);n.success?S.Ay.success("Maestro eliminado con \xe9xito!"):n.error?S.Ay.error(n.error):S.Ay.error(f.HG.ERROR_DEFAULT)}catch(t){S.Ay.error(t)}finally{a(!1),p(null),o()}}else p(null)}})]})}var $=a(6945),ee=a(172),re=a(6595);const ae=function(){const e=(0,t.Zp)(),r=new y.J,[a,p]=(0,n.useState)(""),[A,x]=(0,n.useState)("nombre"),[v,k]=(0,n.useState)("desc"),[M,O]=(0,n.useState)(0),[D,H]=(0,n.useState)([]),[L,N]=(0,n.useState)(!0),[G,J]=(0,n.useState)(null),[P,Z]=(0,n.useState)(!1);function K(){H([]),0!=M?O(0):Q()}async function Q(){N(!0);try{var e=await r.buscar(a,A,v,M);e.success?null!=e.payload&&(H(e.payload),null!=e.paginator&&J(e.paginator)):e.error?S.Ay.error(e.error):S.Ay.error(f.HG.ERROR_DEFAULT)}catch(n){S.Ay.error(f.HG.ERROR_DEFAULT)}finally{N(!1)}}return(0,n.useEffect)(()=>{Q()},[M,A,v]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)($.A,{sx:e=>({color:"#fff",zIndex:e.zIndex.drawer+1}),open:P,children:(0,j.jsx)(ee.A,{color:"inherit"})}),(0,j.jsxs)(s.A,{spacing:2,children:[(0,j.jsx)(d.A,{"aria-label":"breadcrumb",children:(0,j.jsxs)(c.A,{sx:{color:"text.primary",display:"flex",alignItems:"center"},children:[(0,j.jsx)(h.A,{sx:{mr:.5},fontSize:"inherit"}),"Maestros"]})}),(0,j.jsxs)(s.A,{direction:{xs:"column",sm:"row"},spacing:2,sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,j.jsx)(m,{handleBuscar:K,placeholder:"Buscar por nombre o usuario",handleSetPalabra:p}),(0,j.jsx)(i.A,{variant:"outlined",startIcon:(0,j.jsx)(l.A,{}),size:"large",color:"orange",onClick:function(r){e(g.u.SPA_MAESTRO_AGREGAR,{replace:!0})},children:"Maestro"})]}),L?(0,j.jsx)(b,{}):(0,j.jsx)(u.A,{className:"div-table-scroll",children:(0,j.jsxs)(E.A,{stickyHeader:!0,children:[(0,j.jsx)(T.A,{children:(0,j.jsx)(I.A,{className:"table-head-row",children:[{id:1,label:"",ordenBy:"",orden:"",showFilter:!1,with:150},{id:2,label:"Usuario",ordenBy:"username",orden:"desc",showFilter:!0},{id:3,label:"Nombre",ordenBy:"nombre",orden:"desc",showFilter:!0},{id:4,label:"Apellido paterno",ordenBy:"apellido_paterno",orden:"desc",showFilter:!0},{id:5,label:"Apellido materno",ordenBy:"apellido_materno",orden:"desc",showFilter:!0},{id:6,label:"Carrera",ordenBy:"carrera",orden:"desc",showFilter:!0},{id:7,label:"Coordinador",ordenBy:"coordinador",orden:"desc",showFilter:!0},{id:8,label:"Estado",ordenBy:"status",orden:"desc",showFilter:!0},{id:9,label:"",ordenBy:"",orden:"",showFilter:!1}].map(e=>(0,j.jsx)(C.A,{className:"table-cell-sort",children:e.showFilter?(0,j.jsxs)("span",{onClick:()=>{return r=e.ordenBy,x(r),void k("desc"==v?"asc":"desc");var r},children:[e.label,e.ordenBy==A&&("desc"==v?(0,j.jsx)(F.A,{sx:{fontSize:18}}):(0,j.jsx)(z.A,{sx:{fontSize:18}}))]}):(0,j.jsx)("span",{children:e.label})},e.id))})}),(0,j.jsx)(_.A,{children:D.map((e,r)=>(0,j.jsx)(re.A,{in:!L,timeout:250*r+250,children:(0,j.jsxs)(I.A,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[(0,j.jsx)(C.A,{className:"table-cell-img",children:(0,j.jsx)(w.A,{sx:{bgcolor:R.A[500]},children:"U"})}),(0,j.jsx)(C.A,{children:e.username}),(0,j.jsx)(C.A,{children:e.nombre}),(0,j.jsx)(C.A,{children:e.apellido_paterno}),(0,j.jsx)(C.A,{children:e.apellido_materno}),(0,j.jsx)(C.A,{children:(0,f.Ho)(e.carrera)}),(0,j.jsx)(C.A,{children:e.coordinador}),(0,j.jsx)(C.A,{children:(0,j.jsx)(B,{status:e.status})}),(0,j.jsx)(C.A,{children:(0,j.jsx)(Y,{maestro:e,setLoadingModal:Z,onComplete:K})})]},e.maestro_id)}))})]})}),null!=G&&(0,j.jsxs)(s.A,{direction:"row",spacing:2,sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,j.jsxs)(o.A,{className:"paginator-total",children:[G.pageIndex*G.pageSize+1," - ",G.pageIndex*G.pageSize+G.pageSize," de ",G.total]}),(0,j.jsx)(U.A,{count:G.pages,page:M+1,onChange:function(e,r){O(r-1)},showFirstButton:!0,showLastButton:!0})]})]})]})}},9641(e,r,a){a.d(r,{yH:()=>s,Jt:()=>i,rr:()=>l,bE:()=>t,yJ:()=>o});class n{constructor(){this.isDevMode()?n._apiURI="http://localhost:3001":n._apiURI="http://app..com:3001"}isDevMode(){return!0}static get ApiURI(){return"http://localhost:3001"}}async function t(e,r){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const t=new Headers;if(t.append("Content-Type","application/json"),a){var o=localStorage.getItem("token");null==o&&(o=""),t.append("Authorization",o)}var s,i=await fetch(n.ApiURI+e,{method:"POST",body:JSON.stringify(r),headers:t});return i&&(s=await i.json()),s}async function o(e,r){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const t=new Headers;if(t.append("Content-Type","application/json"),a){var o=localStorage.getItem("token");null==o&&(o=""),t.append("Authorization",o)}var s,i=await fetch(n.ApiURI+e,{method:"PUT",body:JSON.stringify(r),headers:t});return i&&(s=await i.json()),s}async function s(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=new Headers;if(a.append("Content-Type","application/json"),r){var t=localStorage.getItem("token");null==t&&(t=""),a.append("Authorization",t)}var o,s=await fetch(n.ApiURI+e,{method:"DELETE",headers:a});return s&&(o=await s.json()),o}async function i(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=new Headers;if(a.append("Content-Type","application/json"),r){var t=localStorage.getItem("token");null==t&&(t=""),a.append("Authorization",t)}var o,s=await fetch(n.ApiURI+e,{method:"GET",headers:a});return s&&(o=await s.json()),o}async function l(e,r){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const t=new Headers;if(t.append("Content-Type","application/json"),a){var o=localStorage.getItem("token");null==o&&(o=""),t.append("Authorization",o)}const s=new URL(n.ApiURI+e);s.search=r.toString();var i,l=await fetch(s,{method:"GET",headers:t});return l&&(i=await l.json()),i}n._apiURI=void 0}}]);
//# sourceMappingURL=194.647fb542.chunk.js.map